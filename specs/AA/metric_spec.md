## METRIC Events Specification
AA's have to raise the METRIC events for all the metrics that cannot be automatically derived from the API telemetry in the [METRIC Event Type](/specs/telemetry.md#metric) structure.

## Metrics Generated by AA

Following metrics can be measured by the AA that is not derived out of telemetry automatically:

| Metric | Mandatory or Optional | Definition | Why is it needed |
|--------|-----------------------|------------|------------------|
| Login Initiation percentage | Mandatory |  Percentage: (No. of exisitng to AA customers that initiated a login/No. of customers that were successfully redirected to the AA client) |  To understand the integration between the FIU and AA |
| Login Success Pecentage  | Mandatory | Percentage: (No. of existing to AA customers that logged in successfully/No. of customers that initiated a login) |  To understand the comfort of exisiting to AA users with the AA |
| Signup Initiate Percentage | Mandatory | Percentage: (No. of new to AA customers that chose to signup/No. of customers that were successfully redirected to AA client) |  To understand how comfortable new to AA customers are with the AA screens |
| Number of VUAs issued | Optional |  Total count of VUAs issued by the AA | To understand the scale of AA adoption from the PoV of the end customer |
| Discovery Initiation Percentage | Mandatory |  Percentage: (No. of customers who chose to discover their accounts)/No. of VUAs issued | To understand how comfortable users are with the AAs discovering their accounts |
| Count of consent viewed | Optional |  Number of customers that saw the consent on the AA domain | To understand how many customers chose to go through the AA screens |

### Login Initiation Percentage

| Metric ID | Metric Category | Frequency | Granularity |
|-----------|-----------------|-----------|-------------|
|`login_init_percent`|`Adoption`| `Day` | `Day` |

#### Event Sample

```js
{ 
  "name": "login_init_percent",
  "unit": "%",
  "sum": {
    "aggregationTemporality": 1,
    "isMonotonic": false,
    "dataPoints": [{
      "asDouble": 75,
      "startTimeUnixNano": "1544712660000000000",
      "endTimeUnixNano": "1544712661590000000",
      "attributes": [
        {"key":"metric_uuid","value": {"stringValue": "43kr3d5f-3cfb-4e6e-b6a2-0ee5d6508923"}},
        {"key":"observedTimeUnixNano","value": {"stringValue": "1581452772000000321"}},
        {"key":"metric.code","value": {"stringValue": "login_init_percent"}},
        {"key":"metric.category","value": {"stringValue": "Adoption"}},
        {"key":"metric.label","value": {"stringValue": "Login Initiation Percentage"}},
        {"key":"metric.granularity","value": {"stringValue": "day"}},
        {"key":"metric.frequency","value": {"stringValue": "day"}}
      ]
    }]
  }
}
```

### Login Success Pecentage

| Metric ID | Metric Category | Frequency | Granularity |
|-----------|-----------------|-----------|-------------|
|`login_success_percent`|`Adoption`| `Day` | `Day` |

#### Event Sample

```js
{ 
  "name": "login_success_percent",
  "unit": "%",
  "sum": {
    "aggregationTemporality": 1,
    "isMonotonic": false,
    "dataPoints": [{
      "asDouble": 75,
      "startTimeUnixNano": "1544712660000000000",
      "endTimeUnixNano": "1544712661590000000",
      "attributes": [
        {"key":"metric_uuid","value": {"stringValue": "43kr3d5f-3cfb-4e6e-b6a2-0ee5d6508923"}},
        {"key":"observedTimeUnixNano","value": {"stringValue": "1581452772000000321"}},
        {"key":"metric.code","value": {"stringValue": "login_success_percent"}},
        {"key":"metric.category","value": {"stringValue": "Adoption"}},
        {"key":"metric.label","value": {"stringValue": "Login Success Percentage"}},
        {"key":"metric.granularity","value": {"stringValue": "day"}},
        {"key":"metric.frequency","value": {"stringValue": "day"}}
      ]
    }]
  }
}
```

### Signup Initiate Percentage

| Metric ID | Metric Category | Frequency | Granularity |
|-----------|-----------------|-----------|-------------|
|`signup_init_percent`|`Adoption`| `Day` | `Day` |

#### Event Sample

```js
{ 
  "name": "signup_init_percent",
  "unit": "%",
  "sum": {
    "aggregationTemporality": 1,
    "isMonotonic": false,
    "dataPoints": [{
      "asDouble": 75,
      "startTimeUnixNano": "1544712660000000000",
      "endTimeUnixNano": "1544712661590000000",
      "attributes": [
        {"key":"metric_uuid","value": {"stringValue": "43kr3d5f-3cfb-4e6e-b6a2-0ee5d6508923"}},
        {"key":"observedTimeUnixNano","value": {"stringValue": "1581452772000000321"}},
        {"key":"metric.code","value": {"stringValue": "signup_init_percent"}},
        {"key":"metric.category","value": {"stringValue": "Adoption"}},
        {"key":"metric.label","value": {"stringValue": "Signup Initiate Percentage"}},
        {"key":"metric.granularity","value": {"stringValue": "day"}},
        {"key":"metric.frequency","value": {"stringValue": "day"}}
      ]
    }]
  }
}
```

### Number of VUAs Issued

| Metric ID | Metric Category | Frequency | Granularity |
|-----------|-----------------|-----------|-------------|
|`vuas_issued_count`|`Adoption`| `Day` | `Day` |

#### Event Sample

```js
{ 
  "name": "vuas_issued_count",
  "unit": "1",
  "sum": {
    "aggregationTemporality": 1,
    "isMonotonic": false,
    "dataPoints": [{
      "asDouble": 34,
      "startTimeUnixNano": "1544712660000000000",
      "endTimeUnixNano": "1544712661590000000",
      "attributes": [
        {"key":"metric_uuid","value": {"stringValue": "43kr3d5f-3cfb-4e6e-b6a2-0ee5d6508923"}},
        {"key":"observedTimeUnixNano","value": {"stringValue": "1581452772000000321"}},
        {"key":"metric.code","value": {"stringValue": "vuas_issued_count"}},
        {"key":"metric.category","value": {"stringValue": "Adoption"}},
        {"key":"metric.label","value": {"stringValue": "Number of VUAs Issued"}},
        {"key":"metric.granularity","value": {"stringValue": "day"}},
        {"key":"metric.frequency","value": {"stringValue": "day"}}
      ]
    }]
  }
}
```

### Discovery Initiation Percentage

| Metric ID | Metric Category | Frequency | Granularity |
|-----------|-----------------|-----------|-------------|
|`discovery_init_percent`|`Adoption`| `Day` | `Day` |

#### Event Sample

```js
{ 
  "name": "discovery_init_percent",
  "unit": "%",
  "sum": {
    "aggregationTemporality": 1,
    "isMonotonic": false,
    "dataPoints": [{
      "asDouble": 75,
      "startTimeUnixNano": "1544712660000000000",
      "endTimeUnixNano": "1544712661590000000",
      "attributes": [
        {"key":"metric_uuid","value": {"stringValue": "43kr3d5f-3cfb-4e6e-b6a2-0ee5d6508923"}},
        {"key":"observedTimeUnixNano","value": {"stringValue": "1581452772000000321"}},
        {"key":"metric.code","value": {"stringValue": "discovery_init_percent"}},
        {"key":"metric.category","value": {"stringValue": "Adoption"}},
        {"key":"metric.label","value": {"stringValue": "Discovery Initiation Percentage"}},
        {"key":"metric.granularity","value": {"stringValue": "day"}},
        {"key":"metric.frequency","value": {"stringValue": "day"}}
      ]
    }]
  }
}
```

### Count of Consent Viewed

| Metric ID | Metric Category | Frequency | Granularity |
|-----------|-----------------|-----------|-------------|
|`consent_viewed_count`|`Adoption`| `Day` | `Day` |

#### Event Sample

```js
{ 
  "name": "consent_viewed_count",
  "unit": "1",
  "sum": {
    "aggregationTemporality": 1,
    "isMonotonic": false,
    "dataPoints": [{
      "asDouble": 23,
      "startTimeUnixNano": "1544712660000000000",
      "endTimeUnixNano": "1544712661590000000",
      "attributes": [
        {"key":"metric_uuid","value": {"stringValue": "43kr3d5f-3cfb-4e6e-b6a2-0ee5d6508923"}},
        {"key":"observedTimeUnixNano","value": {"stringValue": "1581452772000000321"}},
        {"key":"metric.code","value": {"stringValue": "consent_viewed_count"}},
        {"key":"metric.category","value": {"stringValue": "Adoption"}},
        {"key":"metric.label","value": {"stringValue": "Count of Consent Viewed"}},
        {"key":"metric.granularity","value": {"stringValue": "day"}},
        {"key":"metric.frequency","value": {"stringValue": "day"}}
      ]
    }]
  }
}
```